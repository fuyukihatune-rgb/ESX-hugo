{{ $action := default "https://api.web3forms.com/submit" .Site.Params.contribute_form_action }}
{{ $maxBytes := default 2097152 .Site.Params.contribute_max_bytes }}
{{ $maxMB := div $maxBytes 1048576 }}

<form action="{{ $action }}" method="POST" enctype="multipart/form-data" class="contact-form" data-max-size="{{ $maxBytes }}" data-allowed-ext="md,txt">

    {{ with .Site.Params.web3forms_apikey }}
    <input type="hidden" name="apikey" value="{{ . }}">
    {{ end }}
    <!-- <input type="hidden" name="redirect" value="https://yoursite.com/thanks.html"> -->

    <div class="form-group">
        <label for="name" class="form-label">ハンドルネーム (必須)</label>
        <input type="text" id="name" name="name" class="form-control" required>
    </div>

    <div class="form-group">
        <label for="email" class="form-label">メールアドレス (任意)</label>
        <input type="email" id="email" name="email" class="form-control" placeholder="example@mail.com">
    </div>

    <div class="form-group">
        <label for="message" class="form-label">メッセージ (任意)</label>
        <textarea id="message" name="message" rows="5" class="form-control"></textarea>
    </div>

    <div class="form-group">
        <label for="file" class="form-label">寄稿ファイル (必須: .md, .txt)</label>
        <p class="form-note">最大 {{ $maxMB }}MB までアップロードできます。対応形式以外や容量超過のファイルは送信できません。</p>
        <input type="file" id="file" name="file" class="form-control-file" accept=".md,.txt,text/plain" required>
    </div>
    
    <input type="checkbox" name="botcheck" class="hidden" style="display:none;">

    <p class="form-error" data-role="file-error" hidden></p>

    <button type="submit" class="btn btn-submit">
      送信する
    </button>

</form>
